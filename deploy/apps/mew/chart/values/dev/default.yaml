# Environment
environment: dev
namespace: frontend

# Deployment configuration
replicaCount: 1

# Image configuration
image:
  registry: gcr.io
  repository: mirador-dev/mew
  tag: dev
  pullPolicy: IfNotPresent

# Service account
serviceAccount:
  name: k8s-workload-sa

# Gateway configuration
gateway:
  enabled: true
  className: gke-l7-global-external-managed
  hostname: mew.dev.mirador.org
  tls:
    # Pre-created Google-managed SSL certificate name
    certificateName: frontend-mew-dev-cert

# Service configuration
service:
  type: ClusterIP
  port: 80

# Container configuration
container:
  port: 8080  # Dev server port
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: 2000m
      memory: 4Gi

# Probes
probes:
  liveness:
    path: /
    initialDelaySeconds: 60  # Dev server takes longer to start
    periodSeconds: 30
    timeoutSeconds: 5
    failureThreshold: 5
  readiness:
    path: /
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

# Pod security context
podSecurityContext:
  runAsNonRoot: false
  seccompProfile:
    type: RuntimeDefault

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false

# Rolling update strategy
strategy:
  type: RollingUpdate
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0
